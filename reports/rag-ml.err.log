Traceback (most recent call last):
  File "c:\Projects\Workshop2024\.venv\Lib\site-packages\jupyter_cache\executors\utils.py", line 58, in single_nb_execution
    executenb(
  File "c:\Projects\Workshop2024\.venv\Lib\site-packages\nbclient\client.py", line 1305, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Projects\Workshop2024\.venv\Lib\site-packages\jupyter_core\utils\__init__.py", line 165, in wrapped
    return loop.run_until_complete(inner)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adnegrau\AppData\Local\anaconda3\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "c:\Projects\Workshop2024\.venv\Lib\site-packages\nbclient\client.py", line 705, in async_execute
    await self.async_execute_cell(
  File "c:\Projects\Workshop2024\.venv\Lib\site-packages\nbclient\client.py", line 1058, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "c:\Projects\Workshop2024\.venv\Lib\site-packages\nbclient\client.py", line 914, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
query = "what is azure sarch?"

query_embeddings = model.encode(query, normalize_embeddings=True)
vector_query = VectorizedQuery(
    vector=query_embeddings.tolist(), k_nearest_neighbors=3, fields="contentVector"
)

results = search_client.search(
    search_text=query,
    vector_queries=[vector_query],
    select=["title", "content", "category"],
    query_type=QueryType.SEMANTIC,
    semantic_configuration_name="my-semantic-config",
    query_caption=QueryCaptionType.EXTRACTIVE,
    query_answer=QueryAnswerType.EXTRACTIVE,
    top=3,
)

semantic_answers = results.get_answers()
for answer in semantic_answers:
    if answer.highlights:
        print(f"Semantic Answer: {answer.highlights}")
    else:
        print(f"Semantic Answer: {answer.text}")
    print(f"Semantic Answer Score: {answer.score}\n")

for result in results:
    print(f"Title: {result['title']}")
    print(f"Reranker Score: {result['@search.reranker_score']}")
    print(f"Content: {result['content']}")
    print(f"Category: {result['category']}")

    captions = result["@search.captions"]
    if captions:
        caption = captions[0]
        if caption.highlights:
            print(f"Caption: {caption.highlights}\n")
        else:
            print(f"Caption: {caption.text}\n")
------------------


[1;31m---------------------------------------------------------------------------[0m
[1;31mHttpResponseError[0m                         Traceback (most recent call last)
Cell [1;32mIn[17], line 19[0m
[0;32m      4[0m vector_query [38;5;241m=[39m VectorizedQuery(
[0;32m      5[0m     vector[38;5;241m=[39mquery_embeddings[38;5;241m.[39mtolist(), k_nearest_neighbors[38;5;241m=[39m[38;5;241m3[39m, fields[38;5;241m=[39m[38;5;124m"[39m[38;5;124mcontentVector[39m[38;5;124m"[39m
[0;32m      6[0m )
[0;32m      8[0m results [38;5;241m=[39m search_client[38;5;241m.[39msearch(
[0;32m      9[0m     search_text[38;5;241m=[39mquery,
[0;32m     10[0m     vector_queries[38;5;241m=[39m[vector_query],
[1;32m   (...)[0m
[0;32m     16[0m     top[38;5;241m=[39m[38;5;241m3[39m,
[0;32m     17[0m )
[1;32m---> 19[0m semantic_answers [38;5;241m=[39m [43mresults[49m[38;5;241;43m.[39;49m[43mget_answers[49m[43m([49m[43m)[49m
[0;32m     20[0m [38;5;28;01mfor[39;00m answer [38;5;129;01min[39;00m semantic_answers:
[0;32m     21[0m     [38;5;28;01mif[39;00m answer[38;5;241m.[39mhighlights:

File [1;32mc:\Projects\Workshop2024\.venv\Lib\site-packages\azure\search\documents\_paging.py:93[0m, in [0;36mSearchItemPaged.get_answers[1;34m(self)[0m
[0;32m     87[0m [38;5;28;01mdef[39;00m [38;5;21mget_answers[39m([38;5;28mself[39m) [38;5;241m-[39m[38;5;241m>[39m Optional[List[QueryAnswerResult]]:
[0;32m     88[0m [38;5;250m    [39m[38;5;124;03m"""Return answers.[39;00m
[0;32m     89[0m 
[0;32m     90[0m [38;5;124;03m    :return: answers[39;00m
[0;32m     91[0m [38;5;124;03m    :rtype: list[~azure.search.documents.models.QueryAnswerResult] or None[39;00m
[0;32m     92[0m [38;5;124;03m    """[39;00m
[1;32m---> 93[0m     [38;5;28;01mreturn[39;00m cast(List[QueryAnswerResult], [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_first_iterator_instance[49m[43m([49m[43m)[49m[38;5;241;43m.[39;49m[43mget_answers[49m[43m([49m[43m)[49m)

File [1;32mc:\Projects\Workshop2024\.venv\Lib\site-packages\azure\search\documents\_paging.py:102[0m, in [0;36m_ensure_response.<locals>.wrapper[1;34m(self, *args, **kw)[0m
[0;32m    100[0m [38;5;28;01mdef[39;00m [38;5;21mwrapper[39m([38;5;28mself[39m, [38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkw):
[0;32m    101[0m     [38;5;28;01mif[39;00m [38;5;28mself[39m[38;5;241m.[39m_current_page [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:
[1;32m--> 102[0m         [38;5;28mself[39m[38;5;241m.[39m_response [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_get_next[49m[43m([49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mcontinuation_token[49m[43m)[49m
[0;32m    103[0m         [38;5;28mself[39m[38;5;241m.[39mcontinuation_token, [38;5;28mself[39m[38;5;241m.[39m_current_page [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_extract_data([38;5;28mself[39m[38;5;241m.[39m_response)
[0;32m    104[0m     [38;5;28;01mreturn[39;00m f([38;5;28mself[39m, [38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkw)

File [1;32mc:\Projects\Workshop2024\.venv\Lib\site-packages\azure\search\documents\_paging.py:124[0m, in [0;36mSearchPageIterator._get_next_cb[1;34m(self, continuation_token)[0m
[0;32m    122[0m [38;5;28;01mdef[39;00m [38;5;21m_get_next_cb[39m([38;5;28mself[39m, continuation_token):
[0;32m    123[0m     [38;5;28;01mif[39;00m continuation_token [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:
[1;32m--> 124[0m         [38;5;28;01mreturn[39;00m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_client[49m[38;5;241;43m.[39;49m[43mdocuments[49m[38;5;241;43m.[39;49m[43msearch_post[49m[43m([49m[43msearch_request[49m[38;5;241;43m=[39;49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_initial_query[49m[38;5;241;43m.[39;49m[43mrequest[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_kwargs[49m[43m)[49m
[0;32m    126[0m     _next_link, next_page_request [38;5;241m=[39m unpack_continuation_token(continuation_token)
[0;32m    128[0m     [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39m_client[38;5;241m.[39mdocuments[38;5;241m.[39msearch_post(search_request[38;5;241m=[39mnext_page_request, [38;5;241m*[39m[38;5;241m*[39m[38;5;28mself[39m[38;5;241m.[39m_kwargs)

File [1;32mc:\Projects\Workshop2024\.venv\Lib\site-packages\azure\core\tracing\decorator.py:78[0m, in [0;36mdistributed_trace.<locals>.decorator.<locals>.wrapper_use_tracer[1;34m(*args, **kwargs)[0m
[0;32m     76[0m span_impl_type [38;5;241m=[39m settings[38;5;241m.[39mtracing_implementation()
[0;32m     77[0m [38;5;28;01mif[39;00m span_impl_type [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:
[1;32m---> 78[0m     [38;5;28;01mreturn[39;00m [43mfunc[49m[43m([49m[38;5;241;43m*[39;49m[43margs[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m
[0;32m     80[0m [38;5;66;03m# Merge span is parameter is set, but only if no explicit parent are passed[39;00m
[0;32m     81[0m [38;5;28;01mif[39;00m merge_span [38;5;129;01mand[39;00m [38;5;129;01mnot[39;00m passed_in_parent:

File [1;32mc:\Projects\Workshop2024\.venv\Lib\site-packages\azure\search\documents\_generated\operations\_documents_operations.py:756[0m, in [0;36mDocumentsOperations.search_post[1;34m(self, search_request, request_options, **kwargs)[0m
[0;32m    754[0m     map_error(status_code[38;5;241m=[39mresponse[38;5;241m.[39mstatus_code, response[38;5;241m=[39mresponse, error_map[38;5;241m=[39merror_map)
[0;32m    755[0m     error [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_deserialize[38;5;241m.[39mfailsafe_deserialize(_models[38;5;241m.[39mSearchError, pipeline_response)
[1;32m--> 756[0m     [38;5;28;01mraise[39;00m HttpResponseError(response[38;5;241m=[39mresponse, model[38;5;241m=[39merror)
[0;32m    758[0m deserialized [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_deserialize([38;5;124m"[39m[38;5;124mSearchDocumentsResult[39m[38;5;124m"[39m, pipeline_response)
[0;32m    760[0m [38;5;28;01mif[39;00m [38;5;28mcls[39m:

[1;31mHttpResponseError[0m: (FeatureNotSupportedInService) Semantic search is not enabled for this service.
Parameter name: queryType
Code: FeatureNotSupportedInService
Message: Semantic search is not enabled for this service.
Parameter name: queryType
Exception Details:	(SemanticQueriesNotAvailable) Semantic search is not enabled for this service.
	Code: SemanticQueriesNotAvailable
	Message: Semantic search is not enabled for this service.

